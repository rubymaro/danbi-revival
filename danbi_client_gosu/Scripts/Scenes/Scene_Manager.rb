#==============================================================================
# ** Scene::Manager
#------------------------------------------------------------------------------
#  This module manages scene transitions. For example, it can handle
# hierarchical structures such as calling the item screen from the main menu
# or returning from the item screen to the main menu.
#==============================================================================

module Scene
  module Manager
    #--------------------------------------------------------------------------
    # * Module Instance Variables
    #--------------------------------------------------------------------------
    @scene = nil                            # current scene object
    @stack = []                             # stack for hierarchical transitions
    #--------------------------------------------------------------------------
    # * Execute
    #--------------------------------------------------------------------------
    def self.run
      @scene = first_scene_class.new
    end
    #--------------------------------------------------------------------------
    # * Get First Scene Class
    #--------------------------------------------------------------------------
    def self.first_scene_class
      Scene::Title
    end
    #--------------------------------------------------------------------------
    # * Get Current Scene
    #--------------------------------------------------------------------------
    def self.scene
      @scene
    end
    #--------------------------------------------------------------------------
    # * Determine Current Scene Class
    #--------------------------------------------------------------------------
    def self.scene_is?(scene_class)
      @scene.instance_of?(scene_class)
    end
    #--------------------------------------------------------------------------
    # * Direct Transition
    #--------------------------------------------------------------------------
    def self.goto(scene_class)
      @scene = scene_class.new
    end
    #--------------------------------------------------------------------------
    # * Call
    #--------------------------------------------------------------------------
    def self.call(scene_class)
      @stack.push(@scene)
      @scene = scene_class.new
    end
    #--------------------------------------------------------------------------
    # * Return to Caller
    #--------------------------------------------------------------------------
    def self.return
      @scene = @stack.pop
    end
    #--------------------------------------------------------------------------
    # * Clear Call Stack
    #--------------------------------------------------------------------------
    def self.clear
      @stack.clear
    end
    #--------------------------------------------------------------------------
    # * Exit Game
    #--------------------------------------------------------------------------
    def self.exit
      @scene = nil
    end
  end
end